import{_ as h}from"./D0CKb_rL.js";import{g as y,r as u,k as w,v as z,l as C,m as d,c as I,a as l,t as g,n as M,p,q as _,w as m,s as q,j as B,o as r,d as v,_ as D}from"./PmcAgmQa.js";const N={class:"text"},P={class:"nav"},V=y({__name:"index",setup($){const c=B(),t=u(!1),n=u([]),f=()=>{t.value=!t.value},k=()=>{const e=localStorage.getItem("darkMode");e!==null?t.value=e==="true":t.value=window.matchMedia("(prefers-color-scheme: dark)").matches},x=async()=>{const s=(await $fetch("/file/a.txt")).split(`
`),S=Math.ceil(s.length/20);n.value=Array.from({length:S},(b,i)=>s.slice(i*20,(i+1)*20).join(`
`))};w(()=>{k(),x();const e=localStorage.getItem("lastPage")||0;+e!=0&&z({path:"/read",query:{page:e}})});const a=C(()=>parseInt(c.query.page)||1);return d(t,e=>{localStorage.setItem("darkMode",e.toString())}),d(()=>c.query.page,e=>{e>0&&localStorage.setItem("lastPage",+e)}),(e,o)=>{const s=h;return r(),I("div",{class:q(["reader",{dark:t.value}])},[l("button",{class:"toggle",onClick:f,style:M({color:t.value?"#fff":"#000"})},g(t.value?"☀️ 日间模式":"🌙 夜间模式"),5),l("div",N,g(n.value[a.value-1]||"加载中..."),1),l("div",P,[a.value>1?(r(),p(s,{key:0,class:"pagination",to:`/read?page=${a.value-1}`},{default:m(()=>o[0]||(o[0]=[v("上一页")])),_:1,__:[0]},8,["to"])):_("",!0),a.value<n.value.length?(r(),p(s,{key:1,class:"pagination",to:`/read?page=${a.value+1}`},{default:m(()=>o[1]||(o[1]=[v("下一页")])),_:1,__:[1]},8,["to"])):_("",!0)])],2)}}}),A=D(V,[["__scopeId","data-v-b7d9f031"]]);export{A as default};
