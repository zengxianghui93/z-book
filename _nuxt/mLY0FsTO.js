import{_ as h}from"./D0CKb_rL.js";import{g as y,j as w,r as u,k as z,l as C,m as d,c as I,o as l,a as r,t as g,n as M,p,q as _,w as m,d as f,s as B,_ as D}from"./PmcAgmQa.js";const N={class:"text"},P={class:"nav"},q=y({__name:"index",setup(V){const c=w(),t=u(!1),n=u([]),v=()=>{t.value=!t.value},k=()=>{const e=localStorage.getItem("darkMode");e!==null?t.value=e==="true":t.value=window.matchMedia("(prefers-color-scheme: dark)").matches},x=async()=>{const s=(await $fetch("/file/a.txt")).split(`
`),S=Math.ceil(s.length/20);n.value=Array.from({length:S},($,i)=>s.slice(i*20,(i+1)*20).join(`
`))};z(()=>{k(),x(),+(localStorage.getItem("lastPage")||0)});const a=C(()=>parseInt(c.query.page)||1);return d(t,e=>{localStorage.setItem("darkMode",e.toString())}),d(()=>c.query.page,e=>{e>0&&localStorage.setItem("lastPage",+e)}),(e,o)=>{const s=h;return l(),I("div",{class:B(["reader",{dark:t.value}])},[r("button",{class:"toggle",onClick:v,style:M({color:t.value?"#fff":"#000"})},g(t.value?"☀️ 日间模式":"🌙 夜间模式"),5),r("div",N,g(n.value[a.value-1]||"加载中..."),1),r("div",P,[a.value>1?(l(),p(s,{key:0,class:"pagination",to:`/read?page=${a.value-1}`},{default:m(()=>o[0]||(o[0]=[f("上一页")])),_:1,__:[0]},8,["to"])):_("",!0),a.value<n.value.length?(l(),p(s,{key:1,class:"pagination",to:`/read?page=${a.value+1}`},{default:m(()=>o[1]||(o[1]=[f("下一页")])),_:1,__:[1]},8,["to"])):_("",!0)])],2)}}}),A=D(q,[["__scopeId","data-v-42f5e424"]]);export{A as default};
