import{_ as h}from"./wfcUNpi3.js";import{g as y,r as u,k as w,l as z,m as d,c as C,a as l,t as g,n as I,p,q as _,w as m,s as M,j as B,o as r,d as f,_ as D}from"./BbDsw7Te.js";const N={class:"text"},P={class:"nav"},q=y({__name:"index",setup(V){const c=B(),t=u(!1),n=u([]),v=()=>{t.value=!t.value},k=()=>{const e=localStorage.getItem("darkMode");e!==null?t.value=e==="true":t.value=window.matchMedia("(prefers-color-scheme: dark)").matches},x=async()=>{const s=(await $fetch("/file/a.txt")).split(`
`),S=Math.ceil(s.length/20);n.value=Array.from({length:S},($,i)=>s.slice(i*20,(i+1)*20).join(`
`))};w(()=>{k(),x(),+(localStorage.getItem("lastPage")||0)});const a=z(()=>parseInt(c.query.page)||1);return d(t,e=>{localStorage.setItem("darkMode",e.toString())}),d(()=>c.query.page,e=>{e>0&&localStorage.setItem("lastPage",+e)}),(e,o)=>{const s=h;return r(),C("div",{class:M(["reader",{dark:t.value}])},[l("button",{class:"toggle",onClick:v,style:I({color:t.value?"#fff":"#000"})},g(t.value?"☀️ 日间模式":"🌙 夜间模式"),5),l("div",N,g(n.value[a.value-1]||"加载中..."),1),l("div",P,[a.value>1?(r(),p(s,{key:0,class:"pagination",to:`/read?page=${a.value-1}`},{default:m(()=>o[0]||(o[0]=[f("上一页")])),_:1,__:[0]},8,["to"])):_("",!0),a.value<n.value.length?(r(),p(s,{key:1,class:"pagination",to:`/read?page=${a.value+1}`},{default:m(()=>o[1]||(o[1]=[f("下一页")])),_:1,__:[1]},8,["to"])):_("",!0)])],2)}}}),A=D(q,[["__scopeId","data-v-644e1699"]]);export{A as default};
